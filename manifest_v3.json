{
    "name" : "peer-twitch",
    "version" : "1.0",
    "description" : "peer-twitch",
    "permissions": [
        "webRequest",
        "declarativeNetRequest",
        "declarativeNetRequestFeedback"
    ],

    "declarative_net_request": {
        "rule_resources": [{
            "id": "ruleset_1",
            "enabled": true,
            "path": "rules.json"
        }]
    },

    "host_permissions": [
        "https://*.hls.ttvnw.net/v1/playlist/*.m3u8",
        "https://*.twitch.tv/*",
        "https://*.twitchcdn.net/*"
    ],
    "background": {
        "service_worker": "background.js"
    },
    
    "content_scripts": [{
        "matches": ["https://*.twitch.tv/*"],
        "js": [
            "peer_twitch.js", "run_wasm.js"
        ]
    }],
    "web_accessible_resources": [{
        "resources": ["peer_twitch_bg.wasm", "fetch.js", "sw.js", "hello.js"],
        "matches": ["https://*.twitch.tv/*"]
    }],
    "manifest_version": 3
}
